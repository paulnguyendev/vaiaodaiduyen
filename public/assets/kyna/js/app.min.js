"use strict";function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var appObject={handleBanner:function(){$(".banner-widget").length<1||$(".banner-widget").each(function(){var t=$(this),n=t.data("banner-type"),e=t.data("category-id"),a=t.data("course-id"),o=t.data("offset"),i=t.data("limit"),c=(t.data("banner-id"),"/site/common-banner-ajax?banner-type=".concat(n,"&category-id=").concat(e,"&course-id=").concat(a,"&offset=").concat(o,"&limit=").concat(i));$.ajax({url:c,success:function(n){200===n.status.code&&t.append(n.data)},complete:function(){}})})},handlePopupBanner:function(){if($("#popup").length>0){var t=$("#popup");$.ajax({url:t.data("url"),success:function(n){if("undefined"!==n.status&&200===n.status.code&&!$.isEmptyObject(n.data)){var e=n.data;t.attr("data-href-pc",e.image),t.attr("data-href-mob",e.image_mobile),t.attr("title",e.title),window.matchMedia("(max-width: 767px)").matches?t.attr("href",e.image_mobile):t.attr("href",e.image),t.fancybox({afterShow:function(){$("img.fancybox-image").wrap($("<a />",{href:e.href,title:e.title,target:"_blank"}))}}).trigger("click")}}})}},handleSideBanner:function(){if($("#k-slide .container .promotion-banner-slick").length>0){var t=$("#k-slide .container .promotion-banner-slick");$.ajax({url:t.data("url"),success:function(n){if("undefined"!==n.status&&200===n.status.code&&n.data.length>0)return t.html(n.data),appObject.promotionBannerSlick(),null;$("#k-slide").remove()},fail:function(){$("#k-slide").remove()}})}},promotionBannerSlick:function(){$(".promotion-banner-slick").length<1||$(".promotion-banner-slick").slick({slidesToShow:1,slidesToScroll:1,dots:!1,centerMode:!1,prevArrow:'<button type="button" class="slick-prev slick-arrow-lg" aria-label="slick-button"></button>',nextArrow:'<button type="button" class="slick-next slick-arrow-lg" aria-label="slick-button"></button>',responsive:[{breakpoint:1200,settings:{arrows:!1,dots:!0}}]})},handleCloseBannerPromotion:function(){$("#fixed-topbar .close-topbar").on("click",function(t){$("#fixed-topbar").remove()})},init:function(){$(".img-lazy").Lazy(),appObject.handleCloseBannerPromotion(),appObject.handlePopupBanner(),appObject.handleSideBanner()}},addFreeCourse={_pluginSweetAlert:function(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(_defineProperty(n={},0,{status:"success",iconUrl:"https://media-kyna.cdn.vccloud.vn/img/icon-check.svg"}),_defineProperty(n,1,{status:"error",iconUrl:"https://media-kyna.cdn.vccloud.vn/img/icon-warning.svg"}),n),c='<div class="sweet-alert-custom">\n                        <div class="icon-wrap">\n                            <img src="'.concat(i[e].iconUrl,'" alt="Kyna">\n                        </div>\n                        <div class="content-wrap">\n                            <div class="title">').concat(t,'</div>\n                            <div class="group-link">\n                                ').concat(o?"<a class='link link-btn' target=\"blank\" href='".concat(o,"'>Vào học</a>"):"","\n                                ").concat(a?"<a class='link' target='_blank' href='/trang-ca-nhan/khoa-hoc'>Khoá học của tôi</a>":"","\n                              \n                            </div>\n                        </div>\n                    </div>");Swal.fire({customClass:{container:"swal--custom-type-1"},position:"top-end",html:c,timer:5e3,showCloseButton:!0,showConfirmButton:!1,showClass:{popup:"animate__animated animate__slideInRight"},hideClass:{popup:"animate__animated animate__slideOutRight"}})},handleAddToMyCourse:function(){var t=$("#courseDetailFree");$(document).on("click",".card-hover .request-login",function(t){$("body").find(".popover").popover("hide")}),$(document).on("click","#addToMyCourse",function(n){n.preventDefault();var e=$(this).data("course"),a=$('meta[name="csrf-token"]').attr("content");e&&$.ajax({url:"/course/default/assign-course-to-student",type:"POST",data:{course_id:e,_csrf:a}}).done(function(n){if(n.result&&!n.errorCode){if(addFreeCourse._pluginSweetAlert('Khóa học miễn phí <b>"'.concat(n.course_title,'"</b> đã được thêm vào Khóa học của tôi.'),0,!0,n.course_detail_url),t.length>0)return void t.html('<a href="'.concat(n.course_detail_url,'" target="_blank" class="crs-btn-buy crs-btn-org">\n                                                    <b>Vào lớp học</b>\n                                                </a>'));var e=n.course_detail_url.split("lop-hoc/")[1],a=$('.card-course[data-id="'.concat(e,'"]'));a.length>0&&a.attr("data-status-item",2)}else addFreeCourse._pluginSweetAlert("Thêm khóa học không thành công. Bạn vui lòng liên hệ bộ phận chăm sóc khách hàng để được hổ trợ.",1)}).fail(function(t){addFreeCourse._pluginSweetAlert("Thêm khóa học không thành công. Bạn vui lòng liên hệ bộ phận chăm sóc khách hàng để được hổ trợ.",1)})})},init:function(){this.handleAddToMyCourse()}};$(document).ready(function(){appObject.init(),addFreeCourse.init()});